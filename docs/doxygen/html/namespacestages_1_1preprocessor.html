<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Encrypted Computing SDK: stages.preprocessor Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Encrypted Computing SDK
   </div>
   <div id="projectbrief">A modular LLVM-inspired compiler pipeline that enables FHE implementations on HW accelerators like Intel&#39;s HERACLES .</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacestages.html">stages</a></li><li class="navelem"><a class="el" href="namespacestages_1_1preprocessor.html">preprocessor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">stages.preprocessor Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af923f6e9a6f26140331bd3cdf3acbb76"><td class="memItemLeft" align="right" valign="top">(nx.Graph, set, set)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestages_1_1preprocessor.html#af923f6e9a6f26140331bd3cdf3acbb76">__dependencyGraphForVars</a> (list insts_list)</td></tr>
<tr class="memdesc:af923f6e9a6f26140331bd3cdf3acbb76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the listing of instructions, this method returns the dependency graph for the variables in the listing and the sets of destination and source variables.  <a href="namespacestages_1_1preprocessor.html#af923f6e9a6f26140331bd3cdf3acbb76">More...</a><br /></td></tr>
<tr class="separator:af923f6e9a6f26140331bd3cdf3acbb76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a999dbca0a9004daa4b1a53f2b1e893e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestages_1_1preprocessor.html#a999dbca0a9004daa4b1a53f2b1e893e1">injectVariableCopy</a> (MemoryModel mem_model, list insts_list, int instruction_idx, str var_name)</td></tr>
<tr class="memdesc:a999dbca0a9004daa4b1a53f2b1e893e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Injects a copy of a variable into the instruction list at the specified index.  <a href="namespacestages_1_1preprocessor.html#a999dbca0a9004daa4b1a53f2b1e893e1">More...</a><br /></td></tr>
<tr class="separator:a999dbca0a9004daa4b1a53f2b1e893e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8fe2d489bc6d3916d3c957f8053dd8f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestages_1_1preprocessor.html#af8fe2d489bc6d3916d3c957f8053dd8f">reduceVarDepsByVar</a> (MemoryModel mem_model, list insts_list, str var_name)</td></tr>
<tr class="memdesc:af8fe2d489bc6d3916d3c957f8053dd8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reduces variable dependencies by injecting copies of the specified variable.  <a href="namespacestages_1_1preprocessor.html#af8fe2d489bc6d3916d3c957f8053dd8f">More...</a><br /></td></tr>
<tr class="separator:af8fe2d489bc6d3916d3c957f8053dd8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44945c8d1d6d2fca39040e271b3432a1"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestages_1_1preprocessor.html#a44945c8d1d6d2fca39040e271b3432a1">assignRegisterBanksToVars</a> (MemoryModel mem_model, list insts_list, bool use_bank0, verbose=False)</td></tr>
<tr class="memdesc:a44945c8d1d6d2fca39040e271b3432a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assigns register banks to variables using vertex coloring graph algorithm.  <a href="namespacestages_1_1preprocessor.html#a44945c8d1d6d2fca39040e271b3432a1">More...</a><br /></td></tr>
<tr class="separator:a44945c8d1d6d2fca39040e271b3432a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d3c089edbbe86248df0cc7154b8a1d9"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestages_1_1preprocessor.html#a9d3c089edbbe86248df0cc7154b8a1d9">preprocessPISAKernelListing</a> (MemoryModel mem_model, line_iter, bool progress_verbose=False)</td></tr>
<tr class="memdesc:a9d3c089edbbe86248df0cc7154b8a1d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a P-ISA kernel listing, given as an iterator for strings, where each is a line representing a P-ISA instruction.  <a href="namespacestages_1_1preprocessor.html#a9d3c089edbbe86248df0cc7154b8a1d9">More...</a><br /></td></tr>
<tr class="separator:a9d3c089edbbe86248df0cc7154b8a1d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="af923f6e9a6f26140331bd3cdf3acbb76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af923f6e9a6f26140331bd3cdf3acbb76">&#9670;&nbsp;</a></span>__dependencyGraphForVars()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> (nx.Graph, set, set) stages.preprocessor.__dependencyGraphForVars </td>
          <td>(</td>
          <td class="paramtype">list&#160;</td>
          <td class="paramname"><em>insts_list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given the listing of instructions, this method returns the dependency graph for the variables in the listing and the sets of destination and source variables. </p>
<p>Parameters: insts_list (list): List of corresponding pre-processed P-ISA instructions containing the variables to process.</p>
<p>Returns: tuple: A tuple containing:</p><ul>
<li>nx.Graph: Dependency graph for the variables in the listing. Nodes: variable names. Edges: dependencies among variables. Dependencies:<ul>
<li>All variables being read from at the same time in any one instruction depend on each other because it is forbidden to read more than once from the same register bank in the same instruction.</li>
<li>All variables being written to at the same time in any one instruction depend on each other because it is forbidden to write more than once to the same register bank in one instruction.</li>
</ul>
</li>
<li>set: Set of all variables (name) that are destinations in the input <code>insts_list</code>.</li>
<li>set: Set of all variables (name) that are sources in the input <code>insts_list</code>. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="preprocessor_8py_source.html#l00035">35</a> of file <a class="el" href="preprocessor_8py_source.html">preprocessor.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="preprocessor_8py_source.html#l00189">stages.preprocessor.assignRegisterBanksToVars()</a>.</p>

</div>
</div>
<a id="a44945c8d1d6d2fca39040e271b3432a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44945c8d1d6d2fca39040e271b3432a1">&#9670;&nbsp;</a></span>assignRegisterBanksToVars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> str stages.preprocessor.assignRegisterBanksToVars </td>
          <td>(</td>
          <td class="paramtype">MemoryModel&#160;</td>
          <td class="paramname"><em>mem_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list&#160;</td>
          <td class="paramname"><em>insts_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_bank0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assigns register banks to variables using vertex coloring graph algorithm. </p>
<p>The variables contained in the MemoryModel object will be modified to reflect their suggested bank.</p>
<p>Parameters: mem_model (MemoryModel): The MemoryModel object, where all variables are kept. Variables detected that are not already in the MemoryModel collection of variables will be added automatically. The variables contained in the MemoryModel object will be modified to reflect their suggested bank. insts_list (list): List of corresponding pre-processed P-ISA instructions containing the variables to process. use_bank0 (bool): All variables are written into registers in bank 0 from SPAD, while no XInst should be writing its results in bank 0 to avoid write-write conflicts. If <code>True</code>, variables that can remain in bank 0 will be kept there (variables that are never written to). If <code>False</code>, bank 0 will not be assigned to any variable. Resulting ASM instructions should add corresponding <code>move</code> instructions to move variables from bank 0 to correct bank. verbose (bool, optional): If True, prints verbose output. Defaults to False.</p>
<p>Raises: ValueError: Thrown for these cases:</p><ul>
<li>Invalid input values for parameters.</li>
<li>Variables in listing cannot be successfully assigned to banks (the number of banks is insufficient to accommodate the listing given the rules). This should not happen, as long as rules are respected, and all instructions have, at most, 3 inputs, and at most, 3 outputs.</li>
</ul>
<p>Returns: str: The unique dummy variable name that was not used by the collection of variables in the instruction listing. </p>

<p class="definition">Definition at line <a class="el" href="preprocessor_8py_source.html#l00186">186</a> of file <a class="el" href="preprocessor_8py_source.html">preprocessor.py</a>.</p>

<p class="reference">References <a class="el" href="preprocessor_8py_source.html#l00035">stages.preprocessor.__dependencyGraphForVars()</a>, and <a class="el" href="preprocessor_8py_source.html#l00121">stages.preprocessor.reduceVarDepsByVar()</a>.</p>

</div>
</div>
<a id="a999dbca0a9004daa4b1a53f2b1e893e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a999dbca0a9004daa4b1a53f2b1e893e1">&#9670;&nbsp;</a></span>injectVariableCopy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int stages.preprocessor.injectVariableCopy </td>
          <td>(</td>
          <td class="paramtype">MemoryModel&#160;</td>
          <td class="paramname"><em>mem_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list&#160;</td>
          <td class="paramname"><em>insts_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>instruction_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>var_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Injects a copy of a variable into the instruction list at the specified index. </p>
<p>Parameters: mem_model (MemoryModel): The memory model containing the variables. insts_list (list): The list of instructions. instruction_idx (int): The index at which to inject the copy. var_name (str): The name of the variable to copy.</p>
<p>Returns: int: Index for the instruction in the list after injection.</p>
<p>Raises: IndexError: If the instruction index is out of range. </p>

<p class="definition">Definition at line <a class="el" href="preprocessor_8py_source.html#l00085">85</a> of file <a class="el" href="preprocessor_8py_source.html">preprocessor.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="preprocessor_8py_source.html#l00121">stages.preprocessor.reduceVarDepsByVar()</a>.</p>

</div>
</div>
<a id="a9d3c089edbbe86248df0cc7154b8a1d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d3c089edbbe86248df0cc7154b8a1d9">&#9670;&nbsp;</a></span>preprocessPISAKernelListing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list stages.preprocessor.preprocessPISAKernelListing </td>
          <td>(</td>
          <td class="paramtype">MemoryModel&#160;</td>
          <td class="paramname"><em>mem_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>line_iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &#160;</td>
          <td class="paramname"><em>progress_verbose</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a P-ISA kernel listing, given as an iterator for strings, where each is a line representing a P-ISA instruction. </p>
<p>Generates twiddle factors and bit shuffling for original P-ISA xntt instructions.</p>
<p>Variables in <code>mem_model</code> associated with the output will have assigned banks automatically.</p>
<p>Parameters: mem_model (MemoryModel): The MemoryModel object, where all variables are kept. Variables parsed from the input string will be automatically added to the memory model if they do not already exist. The represented object may be modified if addition is needed. line_iter (iterator): Iterator of strings where each is a line of the P-ISA kernel instruction listing. progress_verbose (bool, optional): Specifies whether to output progress every hundred lines processed to stdout. Defaults to False.</p>
<p>Returns: list: A list of <code>BaseInstruction</code>s where each object represents the a parsed instruction. Some P-ISA instructions (such as ntts) are converted into a group of XInst that implement the original P-ISA instruction.</p>
<p>Variables in <code>mem_model</code> collection of variables will be modified to reflect assigned bank in <code>suggested_bank</code> attribute. </p>

<p class="definition">Definition at line <a class="el" href="preprocessor_8py_source.html#l00252">252</a> of file <a class="el" href="preprocessor_8py_source.html">preprocessor.py</a>.</p>

</div>
</div>
<a id="af8fe2d489bc6d3916d3c957f8053dd8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8fe2d489bc6d3916d3c957f8053dd8f">&#9670;&nbsp;</a></span>reduceVarDepsByVar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def stages.preprocessor.reduceVarDepsByVar </td>
          <td>(</td>
          <td class="paramtype">MemoryModel&#160;</td>
          <td class="paramname"><em>mem_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list&#160;</td>
          <td class="paramname"><em>insts_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>var_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reduces variable dependencies by injecting copies of the specified variable. </p>
<p>Parameters: mem_model (MemoryModel): The memory model containing the variables. insts_list (list): The list of instructions. var_name (str): The name of the variable to reduce dependencies for. </p>

<p class="definition">Definition at line <a class="el" href="preprocessor_8py_source.html#l00119">119</a> of file <a class="el" href="preprocessor_8py_source.html">preprocessor.py</a>.</p>

<p class="reference">References <a class="el" href="preprocessor_8py_source.html#l00088">stages.preprocessor.injectVariableCopy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="preprocessor_8py_source.html#l00189">stages.preprocessor.assignRegisterBanksToVars()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
