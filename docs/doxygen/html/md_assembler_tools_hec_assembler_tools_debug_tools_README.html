<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Encrypted Computing SDK: Debug Tools</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Encrypted Computing SDK
   </div>
   <div id="projectbrief">A modular LLVM-inspired compiler pipeline that enables FHE implementations on HW accelerators like Intel&#39;s HERACLES .</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Debug Tools </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This folder contains a collection of scripts designed to assist with debugging and testing various aspects of the assembler and instruction scheduling processes.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Dependencies</h1>
<p>These tools are Python based. Dependencies for these scripts are the same as <a href="../README.md#dependencies">those</a> for the parent project.</p>
<blockquote class="doxtable">
<p><b>Note</b>: Ensure the <code>assembler</code> folder is included in your Python <code>PATH</code>. </p><div class="fragment"><div class="line">export PYTHONPATH=&quot;${PYTHONPATH}:$(pwd)/assembler&quot;</div>
</div><!-- fragment --> </blockquote>
<p>Below is a detailed description and usage example for each tool.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md3"></a>
Tools Overview</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
main.py</h2>
<p>This script serves as the main entry point for running ASM-ISA assembly and P-ISA scheduling processes. It handles the preprocessing, assembly, and scheduling of instructions, transforming them from high-level representations to executable formats.</p>
<p>The script is used to convert P-ISA kernels into ASM-ISA instructions, manage memory models, and ensure that instructions are scheduled correctly according to dependencies and resource constraints.</p>
<ul>
<li><b>Usage</b>: <div class="fragment"><div class="line">python main.py --mem_file &lt;memory_file&gt; --prefix &lt;input_prefix&gt; --isa_spec &lt;isa_spec_file&gt; -v</div>
</div><!-- fragment --><ul>
<li><code>--mem_file</code>: Specifies the input memory file.</li>
<li><code>--prefix</code>: One or more input prefixes to process, representing different instructions or kernels.</li>
<li><code>--<a class="el" href="namespaceisa__spec.html">isa_spec</a></code>: Input ISA specification (.json) file that defines the parameters of the instruction set architecture.</li>
<li><code>-v</code>: Enables verbose mode.</li>
</ul>
</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md6"></a>
isolation_test.py</h2>
<p>This script isolates specific variables in P-ISA by replacing instructions that do not affect the specified variables with NOPs (no operation instructions). The isolation test is used to focus on specific variables within a P-ISA kernel, allowing developers to analyze the impact of these variables.</p>
<ul>
<li><b>Usage</b>: <div class="fragment"><div class="line">python isolation_test.py --pisa_file &lt;pisa_file&gt; --xinst_file &lt;xinst_file&gt; --out_file &lt;output_file&gt; --track &lt;variables_to_track&gt; -v</div>
</div><!-- fragment --><ul>
<li><code>--pisa_file</code>: Input P-ISA prep (.csv) file containing instructions.</li>
<li><code>--xinst_file</code>: Input XInst instruction file.</li>
<li><code>--out_file</code>: Output file name where the modified instructions will be saved.</li>
<li><code>--track</code>: Set of variables to track.</li>
<li><code>-v</code>: Enables verbose mode.</li>
</ul>
</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md8"></a>
deadlock_test.py</h2>
<p>This script checks for deadlocks in the CInstQ and MInstQ caused by sync instructions. It raises an exception if a deadlock is found, indicating a potential issue in instruction scheduling.</p>
<ul>
<li><b>Usage</b>: <div class="fragment"><div class="line">python deadlock_test.py &lt;input_dir&gt; [input_prefix]</div>
</div><!-- fragment --><ul>
<li><code>&lt;input_dir&gt;</code>: Directory containing instruction files, typically organized by prefixes.</li>
<li><code>[input_prefix]</code>: Optional prefix for instruction files, used to specify particular sets of instructions.</li>
</ul>
</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md10"></a>
order_test.py</h2>
<p>This script tests all registers in an XInstQ to determine if any register is used out of order based on the P-ISA instruction order. It is specifically designed for kernels that do not involve evictions.</p>
<p>The script helps ensure that registers are accessed in the correct sequence, which is crucial for maintaining the integrity of instruction execution in systems where register order matters. This is particularly important for debugging and optimizing instruction scheduling.</p>
<ul>
<li><b>Usage</b>: <div class="fragment"><div class="line">python order_test.py --input_file &lt;xinst_file&gt; -v</div>
</div><!-- fragment --><ul>
<li><code>--input_file</code>: Specifies the input (.xinst) file containing the XInstQ instructions.</li>
<li><code>-v</code>: Enables verbose mode for detailed output, providing insights into the processing steps and results.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md11"></a>
xinst_timing_check/inject_bundles.py</h2>
<p>This script injects dummy bundles into instruction files after the first bundle, simulating additional instruction loads for testing purposes. The injection of dummy bundles is used to test the system's handling of instruction loads and synchronization points.</p>
<ul>
<li><b>Usage</b>: <div class="fragment"><div class="line">python inject_bundles.py &lt;input_dir&gt; &lt;output_dir&gt; [input_prefix] [output_prefix] --isa_spec &lt;isa_spec_file&gt; -b &lt;dummy_bundles&gt; -ne</div>
</div><!-- fragment --><ul>
<li><code>&lt;input_dir&gt;</code>: Directory containing input files to be processed.</li>
<li><code>&lt;output_dir&gt;</code>: Directory to save output files with injected bundles.</li>
<li><code>[input_prefix]</code>: Optional prefix for input files, specifying the target instruction set.</li>
<li><code>[output_prefix]</code>: Optional prefix for output files, defining the naming convention for saved files.</li>
<li><code>--<a class="el" href="namespaceisa__spec.html">isa_spec</a></code>: Input ISA specification (.json) file, providing architectural details.</li>
<li><code>-b</code>: Number of dummy bundles to insert, simulating additional instruction loads.</li>
<li><code>-ne</code>: Skip exit in dummy bundles, altering the behavior of injected instructions.</li>
</ul>
</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md13"></a>
xinst_timing_check/xtiming_check.py</h2>
<p>This script checks timing for register access, ensuring registers are not read before their write completes, and checks for bank write conflicts.</p>
<ul>
<li><b>Usage</b>: <div class="fragment"><div class="line">python xtiming_check.py &lt;input_dir&gt; [input_prefix] --isa_spec &lt;isa_spec_file&gt;</div>
</div><!-- fragment --><ul>
<li><code>&lt;input_dir&gt;</code>: Directory containing input files for timing analysis.</li>
<li><code>[input_prefix]</code>: Optional prefix for input files, specifying the target instruction set.</li>
<li><code>--<a class="el" href="namespaceisa__spec.html">isa_spec</a></code>: Input ISA specification (.json) file, providing architectural details for timing validation.</li>
</ul>
</li>
</ul>
<hr  />
 </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
