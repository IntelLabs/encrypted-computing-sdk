<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Encrypted Computing SDK: HERACLES Program Mapper</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Encrypted Computing SDK
   </div>
   <div id="projectbrief">A modular LLVM-inspired compiler pipeline that enables FHE implementations on HW accelerators like Intel&#39;s HERACLES .</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">HERACLES Program Mapper </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md211"></a>
Table of Contents</h1>
<ol type="1">
<li><a href="#requirements">Requirements</a></li>
<li><a href="#build-configuration">Build Configuration</a><ol type="a">
<li><a href="#build-type">Build Type</a><ol type="i">
<li><a href="#third-party-components">Third-Party Components</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#building">Building</a></li>
<li><a href="#running-the-program-mapper">Running the Program Mapper</a></li>
<li><a href="#code-formatting">Code Formatting</a></li>
</ol>
<h1><a class="anchor" id="autotoc_md212"></a>
Requirements</h1>
<p>Current build system uses <code>CMake</code>.</p>
<p>Tested Configuration(s)</p><ul>
<li>Ubuntu 22.04 (also tested on WSL2)</li>
<li>C++17</li>
<li>GCC == 11.3</li>
<li>CMake &gt;= 3.22.1</li>
<li>SNAP (used to support graph features)</li>
<li>JSON for Modern CPP &gt;= 3.11</li>
</ul>
<h1><a class="anchor" id="autotoc_md213"></a>
Build Configuration</h1>
<p>The current build system is minimally configurable but will be improved with time. The project directory is laid out as follows</p>
<ul>
<li><b>program_mapper</b> <em>src directory for the program mapper</em></li>
<li><b>common</b> <em>Common code used by p-isa tools</em></li>
</ul>
<p><b>NOTE:</b> If using an IDE then it is recommended to set the <code>INC_HEADERS</code> flag to include the header files in the project filesystem. This can be done via <code>-DINC_HEADERS=TRUE</code>.</p>
<h2><a class="anchor" id="autotoc_md214"></a>
Build Type</h2>
<p>If no build type is specified, the build system will build in <b>Debug</b> mode. Use <code>-DCMAKE_BUILD_TYPE</code> configuration variable to set your preferred build type:</p>
<ul>
<li><code>-DCMAKE_BUILD_TYPE=Debug</code> : debug mode (default if no build type is specified).</li>
<li><code>-DCMAKE_BUILD_TYPE=Release</code> : release mode. Compiler optimizations for release enabled.</li>
<li><code>-DCMAKE_BUILD_TYPE=RelWithDebInfo</code> : release mode with debug symbols.</li>
<li><code>-DCMAKE_BUILD_TYPE=MinSizeRel</code> : release mode optimized for size.</li>
</ul>
<h3><a class="anchor" id="autotoc_md215"></a>
Third-Party Components &lt;a name="third-party-components"&gt;&lt;/a&gt;</h3>
<p>This backend requires the following third party components:</p>
<ul>
<li><a href="https://github.com/snap-stanford/snap.git">SNAP</a></li>
<li><a href="https://github.com/nlohmann/json">JSON for modern c++</a></li>
</ul>
<p>These external dependencies are fetched and built at configuration time by <code>cmake</code>, see below how to build the project.</p>
<h1><a class="anchor" id="autotoc_md216"></a>
Building</h1>
<p>Build from the top level of p-isa-tools with Cmake as follows:</p>
<div class="fragment"><div class="line">cmake -S . -B build -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">cmake --build build -j</div>
</div><!-- fragment --><p>Build type can also be changed to <code>Debug</code> depending on current needs (Debug should be used if the tool is being used to actively debug failing kernels).</p>
<h1><a class="anchor" id="autotoc_md217"></a>
Running the Program Mapper</h1>
<p>Located in <code>build/bin</code> is an executable called <b>program_mapper</b>. This program can be used to generate a graph of combined p-isa instructions with a supplementary memory file, and a combined p-isa kernel from a program trace. The program accepts a number of commandline options to control its usage.</p>
<p>A typical run is of the form </p><div class="fragment"><div class="line">program_mapper &lt;program_trace.csv&gt; &lt;path-to-kerngen.py&gt;</div>
</div><!-- fragment --><p>The standard list of currently supported options are listed below. </p><div class="fragment"><div class="line">Usage:</div>
<div class="line">    program_mapper program_trace kerngen_loc OPTIONS</div>
<div class="line"> </div>
<div class="line">POSITIONAL ARGUMENTS: 2</div>
<div class="line">program_trace</div>
<div class="line"> Location of a file containing a list in csv format for p_isa instructions</div>
<div class="line"> </div>
<div class="line">kerngen_loc</div>
<div class="line"> Location of the kerngen.py file</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">OPTIONS:</div>
<div class="line">--cache_dir, --cache, -c &lt;name of the kernel cache directory&gt;</div>
<div class="line"> Sets the name of the kernel cache directory [Default: ./kernel_cache]</div>
<div class="line"> </div>
<div class="line">--disable_cache, --no_cache, -dc</div>
<div class="line"> Disables the use of a cache for Ninja kernels</div>
<div class="line"> </div>
<div class="line">--disable_graphs, --graphs, -g</div>
<div class="line"> Disables graph building and features</div>
<div class="line"> </div>
<div class="line">--disable_namespace, --nns, -n</div>
<div class="line"> Disables applying register name spacing on PISAKernel nodes</div>
<div class="line"> </div>
<div class="line">--dot_file_name, -df &lt;name of the dot file to output&gt;</div>
<div class="line"> Sets the name of the output dot file</div>
<div class="line"> </div>
<div class="line">--enable_memory_bank_output, --banks, -b</div>
<div class="line"> Will output P-ISA programs with registers that include hard coded memory banks when enabled</div>
<div class="line"> </div>
<div class="line">--export_dot, -ed</div>
<div class="line"> Export seal trace and p_isa graphs to dot file format</div>
<div class="line"> </div>
<div class="line">--out_dir, --out, -o &lt;name of the output directory&gt;</div>
<div class="line"> Sets the location for all output files [Default: ./]</div>
<div class="line"> </div>
<div class="line">--remove_cache, --rm_cache, -rc</div>
<div class="line"> Remove the kernel cache directory at the end of the program</div>
<div class="line"> </div>
<div class="line">--verbose, -v</div>
<div class="line"> Enables more verbose execution reporting to std out</div>
<div class="line"> </div>
<div class="line">-h, /h, \h, --help, /help, \help</div>
<div class="line">    Shows this help.</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md218"></a>
Code Formatting</h1>
<p>The repository includes <code>pre-commit</code> and <code>clang-format</code> hooks to help ensure code consistency. It is recommended to install <code>pre-commit</code> and <code>pre-commit hooks</code> prior to committing to repo. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
